<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>CBTF - Caught by the Fuzz! ‚Ä¢ CBTF</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="‚Äùimage/svg+xml‚Äù" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="lightswitch.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="CBTF - Caught by the Fuzz!">
<meta name="description" content="A minimal fuzz-test runner for R">
<meta property="og:description" content="A minimal fuzz-test runner for R">
<meta property="og:image" content="https://mcol.github.io/caught-by-the-fuzz/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">CBTF</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mcol/caught-by-the-fuzz/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="cbtf-caught-by-the-fuzz-a-minimalistic-fuzz-test-runner-for-r">CBTF: Caught by the Fuzz! A minimalistic fuzz-test runner for R
<a class="anchor" aria-label="anchor" href="#cbtf-caught-by-the-fuzz-a-minimalistic-fuzz-test-runner-for-r"></a>
</h1>
</div>
<!-- badges: start -->

<p>The <code>CBTF</code> package implements a very simple mechanism for fuzz-testing functions in the public interface of an R package.</p>
<p>Fuzz testing helps identify functions that lack sufficient argument validation, and uncovers sets of inputs that, while valid by function signature, may cause issues within the function body.</p>
<p>The core functionality of the package is in the <code><a href="reference/fuzz.html">fuzz()</a></code> function, which calls each provided function with a certain input and records the output produced. If an error or a warning is generated, this is captured and reported to the user, unless it matches a pattern of whitelisted messages, as specified in the <code>ignore_patterns</code> argument. The objects returned by <code><a href="reference/fuzz.html">fuzz()</a></code> can be inspected with <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> and <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>.</p>
<p>Whitelisting can also be done after a fuzz run has been completed via the <code><a href="reference/whitelist.html">whitelist()</a></code> function, so that only messages that need to be acted upon are actually shown. Using <code><a href="reference/whitelist.html">whitelist()</a></code> has the advantage of not requiring to run the fuzzer over all functions and all inputs again.</p>
<p>Note that <code><a href="reference/fuzz.html">fuzz()</a></code> uses the <a href="https://mirai.r-lib.org/" class="external-link"><code>mirai</code> package</a> for asynchronous operations and parallelisation, and execution occurs on persistent background processes. These can be started automatically by specifying the <code>daemons</code> option; alternatively, they can be set up manually with the <code><a href="https://mirai.r-lib.org/reference/daemons.html" class="external-link">mirai::daemons()</a></code> function; refer to the original <code>mirai</code> documentation for a complete description of its arguments and behaviour.</p>
<p>The helper function <code><a href="reference/get_exported_functions.html">get_exported_functions()</a></code> identifies the functions in the public interface of a given package, facilitating the generation of the list of functions to be fuzzed.</p>
<p>The helper function <code><a href="reference/test_inputs.html">test_inputs()</a></code> is invoked by <code><a href="reference/fuzz.html">fuzz()</a></code> if the user doesn‚Äôt specify the set of inputs to be tested. By default it generates a large set of potentially problematic inputs, but these can be limited just to the desired classes of inputs.</p>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>This is a simple example that displays how to use <code>CBTF</code> to fuzz an R package. We consider <code>mime</code> because it is small enough to run quickly and is likely installed on most systems.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mcol.github.io/caught-by-the-fuzz/">CBTF</a></span><span class="op">)</span></span>
<span><span class="va">funs</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_exported_functions.html">get_exported_functions</a></span><span class="op">(</span><span class="st">"mime"</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fuzz.html">fuzz</a></span><span class="op">(</span><span class="va">funs</span>, what <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="do">## ‚Ñπ Fuzzing 2 functions with 1 input (using 2 daemons)</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="do">## ‚Ñπ 2 tests run  [4ms]</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="do">## ‚úñ  üö®   CAUGHT BY THE FUZZ!   üö®</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="do">## ‚îÄ‚îÄ Test input [[1]]: TRUE</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="do">##       guess_type  FAIL  a character vector argument expected</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="do">##  parse_multipart  FAIL  $ operator is invalid for atomic vectors</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="do">##  [ FAIL 2 | WARN 0 | SKIP 0 | OK 0 ]</span></span></code></pre></div>
<p>The first occurrence is a false positive, as the message returned indicates that the input was checked and the function returned cleanly. The second case instead reveals that the function didn‚Äôt validate its input: indeed, it expected an environment, and used the <code>$</code> operation on it without checking.</p>
<p>The false positive result can be easily removed by whitelisting an appropriate pattern:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/whitelist.html">whitelist</a></span><span class="op">(</span><span class="va">res</span>, <span class="st">"a character vector argument expected"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="do">## ‚úñ  üö®   CAUGHT BY THE FUZZ!   üö®</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="do">## ‚îÄ‚îÄ Test input [[1]]: TRUE</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="do">##  parse_multipart  FAIL  $ operator is invalid for atomic vectors</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="do">##  [ FAIL 1 | WARN 0 | SKIP 0 | OK 1 ]</span></span></code></pre></div>
<div class="section level3">
<h3 id="fuzzing-multiple-arguments">Fuzzing multiple arguments<a class="anchor" aria-label="anchor" href="#fuzzing-multiple-arguments"></a>
</h3>
<p>The example above didn‚Äôt specify the <code>args</code> argument, and therefore only the first function argument was fuzzed. By setting <code>args</code>, it‚Äôs possible to provide a list of arguments (of any length) to pass to the functions being fuzzed.</p>
<p>To fuzz the first three arguments of <code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix()</a></code> (<code>data</code>, <code>nrow</code> and <code>ncol</code>), we could do the following:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/fuzz.html">fuzz</a></span><span class="op">(</span><span class="st">"matrix"</span>, what <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NULL</span><span class="op">)</span>, args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="do">## ‚Ñπ Fuzzing 1 function with 6 inputs (using 2 daemons)</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="do">## ‚Ñπ Functions will be searched in the global namespace as `package` was not specified</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="do">## ‚Ñπ 6 tests run  [6ms]</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="do">## ‚úñ  üö®   CAUGHT BY THE FUZZ!   üö®</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="do">## ‚îÄ‚îÄ Test input [[2]]: NULL, 2, 2</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="do">##  matrix  FAIL  'data' must be of a vector type, was 'NULL'</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="do">## ‚îÄ‚îÄ Test input [[3]]: 1:4, NA, 2</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="do">##  matrix  FAIL  invalid 'nrow' value (too large or NA)</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="do">## ‚îÄ‚îÄ Test input [[5]]: 1:4, 2, NA</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="do">##  matrix  FAIL  invalid 'ncol' value (too large or NA)</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="do">##  [ FAIL 3 | WARN 0 | SKIP 0 | OK 3 ]</span></span></code></pre></div>
<p>If names are given to elements in <code>args</code>, they will be used in the input lists generated. This can be helpful to fuzz a specific argument across several function, or to fuzz an argument that comes later in the argument list or that are passed via <code>...</code>.</p>
<p>For example, the following will fuzz the <code>data</code>, <code>nrow</code> and <code>dimnames</code> arguments:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/fuzz.html">fuzz</a></span><span class="op">(</span><span class="st">"matrix"</span>, what <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NULL</span><span class="op">)</span>, args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">2</span>, dimnames <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="do">## ‚Ñπ Fuzzing 1 function with 6 inputs (using 2 daemons)</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="do">## ‚Ñπ Functions will be searched in the global namespace as `package` was not specified</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="do">## ‚Ñπ 6 tests run  [6ms]</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="do">## ‚úñ  üö®   CAUGHT BY THE FUZZ!   üö®</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="do">## ‚îÄ‚îÄ Test input [[2]]: NULL, 2, dimnames = NULL</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="do">##  matrix  FAIL  'data' must be of a vector type, was 'NULL'</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="do">## ‚îÄ‚îÄ Test input [[3]]: 1:4, NA, dimnames = NULL</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="do">##  matrix  FAIL  invalid 'nrow' value (too large or NA)</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a><span class="do">## ‚îÄ‚îÄ Test input [[5]]: 1:4, 2, dimnames = NA</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="do">##  matrix  FAIL  'dimnames' must be a list</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a><span class="do">##  [ FAIL 3 | WARN 0 | SKIP 0 | OK 3 ]</span></span></code></pre></div>
<p>Fuzzing is generally more effective when the values in <code>args</code> provide a good default for the functions being fuzzed; while an argument is being fuzzed, the others remain valid, allowing for a broader exploration of the argument space.</p>
<p>However, this is not strictly necessary (and may not be achievable when fuzzing multiple functions simultaneously). Additionally, some code paths may only be reached through combinations of invalid values that would otherwise remain unexplored.</p>
</div>
</div>
<div class="section level2">
<h2 id="advanced-topics">Advanced topics<a class="anchor" aria-label="anchor" href="#advanced-topics"></a>
</h2>
<div class="section level3">
<h3 id="generated-argument-lists">Generated argument lists<a class="anchor" aria-label="anchor" href="#generated-argument-lists"></a>
</h3>
<p>Either <code>args</code> or <code>what</code> can be <code>NULL</code>, but not both. The most basic use sets <code>args = NULL</code>, in which case each of the inputs in <code>what</code> is assigned to the first argument of each function being fuzzed. For example, if <code>what = list(NA, "")</code>, then the following input lists will be generated:</p>
<ul>
<li><code>list(NA)</code></li>
<li><code>list("")</code></li>
</ul>
<p>If instead <code>what = NULL</code>, the exact argument list defined in <code>args</code> will be tested on all functions without any fuzzing. This can be useful after a fuzz run to collect results on a specific set of problematic inputs, or to monitor progress while addressing the bugs discovered during the fuzzing process.</p>
<p>However, the full potential of <code>CBTF</code> is realised by specifying both <code>what</code> (or leaving it unset, which deploys the full range of inputs generated by <code><a href="reference/test_inputs.html">test_inputs()</a></code>) and <code>args</code>. In such cases, <code>args</code> is expanded internally into multiple lists, each differing by one elements modified according to an element in <code>what</code>.</p>
<p>For example, if <code>what = list(NA, "")</code> and <code>args = list(x = 11, y = 22, 33)</code>, the following input lists will be generated and tested:</p>
<ul>
<li><code>list(x = NA, y = 22, 33)</code></li>
<li><code>list(x = "", y = 22, 33)</code></li>
<li><code>list(x = 11, y = NA, 33)</code></li>
<li><code>list(x = 11, y = "", 33)</code></li>
<li><code>list(x = 11, y = 22, NA)</code></li>
<li><code>list(x = 11, y = 22, "")</code></li>
</ul>
<p>Sometimes it may be helpful to specify an argument ho have a fixed value, so that it remains unchanged while fuzzing. This can be done by prepending ‚Äú..‚Äù to the argument name. For example, to fix argument <code>x</code> at 11, we would use <code>args = list(..x = 11, y = 22, 33)</code>, and only these inputs will be tested:</p>
<ul>
<li><code>list(x = 11, y = NA, 33)</code></li>
<li><code>list(x = 11, y = "", 33)</code></li>
<li><code>list(x = 11, y = 22, NA)</code></li>
<li><code>list(x = 11, y = 22, "")</code></li>
</ul>
</div>
<div class="section level3">
<h3 id="parallel-execution">Parallel execution<a class="anchor" aria-label="anchor" href="#parallel-execution"></a>
</h3>
<p>The implementation of <code><a href="reference/fuzz.html">fuzz()</a></code> uses the <a href="https://mirai.r-lib.org/" class="external-link"><code>mirai</code> package</a> for asynchronous operations and parallelisation. This allows to fuzz the functions on persistent background processes (daemons) in parallel.</p>
<p>There are two main approaches to control parallel execution:</p>
<ol style="list-style-type: decimal">
<li>
<p>Setting the <code>daemons</code> argument to an integer value (2 by default): this will start as many daemons as specified (and shut them down automatically at the end of the fuzz run). Note that there is no benefit in starting more daemons than the number of available cores.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## this will start 4 daemons</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fuzz.html">fuzz</a></span><span class="op">(</span><span class="va">funs</span>, daemons <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p>Manually setting up the daemons before the start of the function: this can be accomplished via <code><a href="https://mirai.r-lib.org/reference/daemons.html" class="external-link">mirai::daemons()</a></code>, which allows to specify remote daemons as well as local one. This also avoids the cost of starting and closing daemons if <code><a href="reference/fuzz.html">fuzz()</a></code> were to be called multiple times. It remains responsibility of the user to close the daemons when no longer in use. When active daemons are found, the <code>daemons</code> argument will be ignored. Refer to the original <code>mirai</code> documentation for a complete description of its arguments and behaviour.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## set up persistent background processes on the local machine</span></span>
<span><span class="fu">mirai</span><span class="fu">::</span><span class="fu"><a href="https://mirai.r-lib.org/reference/daemons.html" class="external-link">daemons</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fuzz.html">fuzz</a></span><span class="op">(</span><span class="va">funs</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## close the background processes</span></span>
<span><span class="fu">mirai</span><span class="fu">::</span><span class="fu"><a href="https://mirai.r-lib.org/reference/daemons.html" class="external-link">daemons</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span></code></pre></div>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="timeouts">Timeouts<a class="anchor" aria-label="anchor" href="#timeouts"></a>
</h3>
<p>Long-running functions can slow down the progress of <code><a href="reference/fuzz.html">fuzz()</a></code>, so by default if a function does not produce an error within 2 seconds, it will be stopped. A timed out function returns an <code>"OK"</code> result, with the corresponding <code>$msg</code> field recording that a timeout was applied.</p>
<p>However, the default timeout may be too short (or perhaps too long) in some applications. If desired, the maximum running time of a job (in seconds) can be controlled via the <code>timeout</code> argument of <code><a href="reference/fuzz.html">fuzz()</a></code></p>
</div>
<div class="section level3">
<h3 id="controlling-the-inputs-tested">Controlling the inputs tested<a class="anchor" aria-label="anchor" href="#controlling-the-inputs-tested"></a>
</h3>
<p>By default, <code><a href="reference/fuzz.html">fuzz()</a></code> tests all the inputs produced by <code><a href="reference/test_inputs.html">test_inputs()</a></code> (currently 70 inputs). However, this can be controlled by specifying the classes that should be tested:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/test_inputs.html">test_inputs</a></span><span class="op">(</span>use <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"scalar"</span>, <span class="st">"numeric"</span>, <span class="st">"integer"</span>, <span class="st">"matrix"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, one can specify the classes to be excluded:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/test_inputs.html">test_inputs</a></span><span class="op">(</span>skip <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date"</span>, <span class="st">"raw"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>A vector of valid classes can be retrieved programmatically by setting this argument to ‚Äúhelp‚Äù:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/test_inputs.html">test_inputs</a></span><span class="op">(</span><span class="st">"help"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="do">##  [1] "all"        "scalar"     "numeric"    "integer"    "logical"   </span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="do">##  [6] "character"  "factor"     "data.frame" "matrix"     "array"     </span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="do">## [11] "date"       "raw"        "na"         "list"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="fuzzing-list-inputs-automatically">Fuzzing list inputs automatically<a class="anchor" aria-label="anchor" href="#fuzzing-list-inputs-automatically"></a>
</h3>
<p>It is trivial to augment a given set of inputs with list versions of the same. This effectively doubles the number of tests run with no additional coding effort.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/fuzz.html">fuzz</a></span><span class="op">(</span><span class="va">funs</span>, what <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">letters</span><span class="op">)</span>, listify_what <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="do">## ‚Ñπ Fuzzing 2 functions with 2 inputs (using 2 daemons)</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="do">## ‚Ñπ 4 tests run  [5ms]</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="do">## ‚úñ  üö®   CAUGHT BY THE FUZZ!   üö®</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="do">## ‚îÄ‚îÄ Test input [[1]]: letters</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="do">##  parse_multipart  FAIL  $ operator is invalid for atomic vectors</span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="do">## ‚îÄ‚îÄ Test input [[2]]: list(letters)</span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="do">##       guess_type  FAIL  a character vector argument expected</span></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a><span class="do">##  [ FAIL 2 | WARN 0 | SKIP 0 | OK 2 ]</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="funding">Funding<a class="anchor" aria-label="anchor" href="#funding"></a>
</h2>
<p>Development of <code>CBTF</code> is partially supported through the DFG programme ‚ÄúREPLAY: REProducible Luminescence Data AnalYses‚Äù <a href="https://gepris.dfg.de/gepris/projekt/528704761?language=en" class="external-link">No 528704761</a> led by Dr Sebastian Kreutzer (PI at LIAG - Institute for Applied Geophysics, Hannover, DE) and Dr Thomas Kolb (PI at Justus-Liebig-University Giessen, DE). Updates on the REPLAY project at large are available at the <a href="https://replay.geog.uni-heidelberg.de/" class="external-link">REPLAY website</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=CBTF" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/mcol/caught-by-the-fuzz/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mcol/caught-by-the-fuzz/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing CBTF</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Marco Colombo <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-6672-0623" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=CBTF" class="external-link"><img src="https://www.r-pkg.org/badges/version/CBTF" alt="CRAN"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marco Colombo.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
